<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../scss/custom.scss">
    <link href='https://fonts.googleapis.com/css?family=Mulish' rel='stylesheet'>

    <title>Accessibility, Equity, and Resources for Crisis Response</title>
  </head>

  <body>

    <!--This is the Nav Bar-->
    <div class="container-fluid custombg">
        <!-- Content Here -->
        <nav class="navbar navbar-expand-lg navbar-light" style="background-color:#F7F7F7">
          <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#">Accessibility, Equity, and Resources for Crisis Response</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="index.html">Problem</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="solution.html">Solution</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Process
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <li><a class="dropdown-item" href="methods.html">Methods</a></li>
                    <li><a class="dropdown-item" href="design.html">Design</a></li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="story.html">Our Story</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
    </div>

    <div class="container text-center mt-5 pt-5 pb-5">
        <h1 class="fw-bold">This is the Story</h1>
    </div>
    
    <script src="./index.js"></script>
  </body>


  

      <body>

          <div class="container-fluid" id="root">
            <div class="row justify-content-center" id="scrolly__section">

              <div class="col-4 scrolly__content">

                <div class="step" data-step="1">
                  <div class="text-block pa-2">
                    <p class="text-body-2">lorem 1</p>
                    <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                  </div>
                </div>
                <div class="step" data-step="2">
                  <div class="text-block pa-2">
                    <p class="text-body-2">lorem 2</p>
                    <p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                  </div>            
                </div>
                <div class="step" data-step="3">
                  <div class="text-block pa-2">
                    <p class="text-body-2">lorem 3</p>
                    <p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                  </div>            
                </div>
                <div class="step" data-step="4">
                  <div class="text-block pa-2">
                    <p class="text-body-2">lorem 4</p>
                    <p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                  </div>            
                </div>
              </div>
    
              <div class="col-6 scrolly__chart">
                <iframe scrolling="no" src="https://flo.uri.sh/story/1240000/embed#slide-0"></iframe>
              </div>
            </div>
          </div>
      
       

    
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
        <script src="https://unpkg.com/intersection-observer"></script>
        <script src="https://unpkg.com/scrollama"></script>    
        <script src="https://public.flourish.studio/resources/embed.js"></script>
        
        <script>
        var scrolly = d3.select("#scrolly__section");
        var chart = scrolly.select(".scrolly__chart");
        var content = scrolly.select(".scrolly__content");
        var step = content.selectAll(".step");
        
        // initialize the scrollama
        var scroller = scrollama();
        
        // generic window resize listener event
        function handleResize() {
          // 1. update height of step elements
          var stepH = Math.floor(window.innerHeight * 1);
          step.style("height", stepH + "px");
        
          var figureHeight = window.innerHeight * 0.75;
          var figureMarginTop = (window.innerHeight - figureHeight) / 2;
        
          chart
            .style("height", figureHeight + "px")
            .style("top", figureMarginTop + "px");
        
          // 3. tell scrollama to update new element dimensions
          scroller.resize();
        }
        
        // scrollama event handlers
        function handleStepEnter(response) {
          const textblock = step.select(".text-block");
        
          // add color to current step only
          textblock.classed("is-active", function(d, i) {
            return i === response.index;
          });
        
          // update graphic based on step
          const linkHead = 'https://flo.uri.sh/story/1240000/embed#slide-'
          const slide = response.index
        
          d3.select('.scrolly__chart iframe')
            .attr('src', linkHead + slide);
        }
        
        function setupStickyfill() {
          d3.selectAll(".sticky").each(function() {
            Stickyfill.add(this);
          });
        }
        
        function init() {
          setupStickyfill();
          handleResize();
          scroller
            .setup({
              step: "#scrolly__section .scrolly__content .step",
              offset: 0.7,
            })
            .onStepEnter(handleStepEnter);
        
          // setup resize event
          window.addEventListener("resize", handleResize);
        }
        
        init();
      </script>
        


    <script src="./index.js"></script>
  </body>
</html>



